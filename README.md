# Wplace Monitor

## 简介
用于监控 wplace 领地状态的桌面程序。

---

## 安装
### Windows
1. 从[这里](https://github.com/kompl3xpr/wplace_monitor_py/releases/latest/download/wplace_monitor_gui_windows_x64.zip)下载程序的压缩包。
2. 解压到任意文件夹，确保权限正常。
3. 运行 `.exe` 程序。

### 其他操作系统
若使用其他操作系统，可尝试手动从源码打包：
1. 使用任何方式下载该仓库的源代码。
2. 安装最新版的 Python。
3. 在项目的根目录运行 `setup.py` 文件。
4. 打包后的引用程序会存放在 `dist/` 目录。



## 使用方式

### 核心概念

* **区块**：wplace.live 将整个世界划分为 2048×2048 个正方形区块，每个区块的尺寸为 **1000×1000** 像素。每个区块都有对应的坐标，也就是 Blue Marble 插件下的 `tl_x` 和 `tl_y`）。
* **区域**：本工具以区域为单位进行管理。一个区域只能管理一个区块，用遮罩区分哪些空间需要检查。
* **参考图**：一张 1000×1000 的 RGBA 图片，是检查的基准。在确保你的领地正常后，可以直接把区块的当前图片设置为参考图。
* **遮罩**：一张 1000×1000 的黑白图片，工具只会对遮罩白色区域所对应的空间进行检查。
* **异常像素**：当工具执行检查时，如果遮罩白色区域内的某个像素颜色与「参考图」中对应位置的像素颜色不一致，该像素就会被标记为异常。异常像素的信息会列在左边的列表 **（点击后可以跳转到其位置）**，并于区域视图中以醒目的**红色高光**显示。


### 添加区域

点击界面上的 **「添加」** 按钮，输入区域名称（请使用字母、数字和下划线的组合，如：`beagle_duodong_01`），然后填入该区域的 **XY** 坐标，即可快速创建新区域。

### 删除区域

选择你想要删除的区域，进入 **「区域详情」** 页面后，点击上方工具栏的 **「编辑」**，然后选择**「删除区域」**，即可将该区域永久移除。

### 编辑区域

在 **「区域详情」** 页面，你可以使用工具栏中的编辑功能对区域进行精细化管理。

#### 修改基本信息
你可以在此更改区域的名称和坐标，但请务必遵循指定的命名格式。

#### 设置遮罩
有两种方式来定义你的遮罩区域：
* **方式一：手动绘制**

    1.  点击 **「编辑遮罩」**。
    2.  使用绘图工具，用**白色**标记需要检查的区域，用**黑色**标记不需要检查的区域。
    3.  点击 **「保存遮罩」**。

* **方式二：导入图片**

    1.  点击 **「导入遮罩」**。
    2.  选择你预先准备好的遮罩图片进行导入，确保大小在 1000×1000 像素。

#### 3. 更新参考图
更新参考图有两种方法：
* **方式一：实时捕获**

    点击 **「把当前状态设置为参考图」**，系统会立即将该区域的实时画面保存为新的参考基准。
* **方式二：导入图片**

    选择一张你希望作为参考图的本地图片进行导入，确保大小在 1000×1000 像素。

### 检查区域

系统通过对比遮罩区域与参考图来检查异常，有两种检查方式：

* **手动检查**

    在主页点击 **「检查全部」**，或在 **「区域详情」** 页点击 **「检查」** 按钮。请注意，为避免请求过多被 ban 掉 IP，请勿过于频繁地进行手动检查。

* **自动检查**

    在主页点击 **「设置」**，你可以自定义自动检查的刷新间隔，以及其他个性化功能。你也可以随时在主页点击 **「关闭自动检查」** 来停止该功能。

### 异常通知

手动检查或自动检查时，若发现遮罩区域存在异常像素时，系统会在右下角弹出通知并播放声音（可设置音量）。若一切正常，则不会有任何提醒。


## Q & A

# Windows 如何设置 Wplace Monitor 开机自动在后台运行
1. 键盘输入 Win + R 打开运行窗口。
2. 在运行窗口的文本框内输入 `shell:startup` 并回车确定，打开 Windows 启动程序的目录。
3. 为 `wplace_monitor.exe` 创建一份快捷方式，移动到该目录内。
4. 右键快捷方式，选择 **「属性」**，在 **「目标」**字段的末尾添加 `-hide`。

   例如，如果「目标」字段的值原来是：

   `"C:\Program  Files\WplaceMonitor\wplace_monitor.exe"`

   修改后就会变为：

   `"C:\Program Files\WplaceMonitor\wplace_monitor.exe" -hide`
5. 完成上述所有步骤后，每次重启系统，程序都会自动在后台运行。